<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Tubeslayer - <span th:text="${mkDetail.nama}">Mata Kuliah</span></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/css/dash-user.css">
    <link rel="stylesheet" href="/css/matkul-detail.css">
    <link rel="icon" href="/logo/blue-logo.png" type="image/png">

    <script src="/js/dash-user.js" defer></script>
    <script src="/js/matkul-detail.js" defer></script>

    <link href='https://cdn.boxicons.com/3.0.5/fonts/basic/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <nav class="sidebar close">
        <header>
            <div class="image-text">
                <span class="image">
                    <img src="/logo/blue-logo.png" alt="logo">
                </span>
                <div class="text header-text">
                    <span class="name">Tubeslayer</span>
                </div>
            </div>
        </header>
        <i class='bx bx-chevron-right toggle'></i> 
        <div class="menu-bar">
            <div class="menu">
                <ul class="menu-links">
                    <li class="nav-link">
                        <a href="/admin/dashboard">
                            <img src="/icon/dashboard.png" alt="Dashboard Icon" class="icon dashboard-icon">
                            <span class="text nav-text">Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-link active">
                        <a href="/admin/menu-awal-ad">
                            <img src="/icon/database.png" alt="Database Icon" class="icon database-icon">
                            <span class="text nav-text">Data</span>
                        </a>
                    </li>
                    <li class="nav-link">
                        <a href="/admin/arsip-mata-kuliah">
                            <img src="/icon/archive.png" alt="Archive Icon" class="icon archive-icon">
                            <span class="text nav-text">Arsip Mata Kuliah</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="home">
        <div class="header">
            <div class="left-section">
                <span class="dashboard-title">Kelola Mata Kuliah</span>
            </div>
            <div class="right-section">
                <div class="info">
                    <span class="name" th:text="${user.nama}">Nama Admin</span>
                    <span class="role" th:text="${user.role}">Admin</span>
                </div>
                <a th:href="@{/profil}">
                    <img src="/icon/pfp.png" class="pfp" alt="pfp">
                </a>
                <button class="logout" id="logoutButton">
                    <img src="/icon/logout.png" class="logout-btn">
                </button>
            </div>
        </div>

        <div class="mk-tab">
            <a th:href="@{/admin/matkul-detail(kodeMk=${mkDetail.kodeMK}, colorIndex=${colorIndex})}"
               class="tab active">
                Kuliah
            </a>
            <a th:href="@{/admin/peserta-detail(kodeMk=${mkDetail.kodeMK}, colorIndex=${colorIndex})}"
               class="tab">
                Daftar Peserta
            </a>
        </div>

        <div class="detail-wrapper">
            <div class="mk-header">
                <div class="mk-img" th:classappend="'gradient-' + (${colorIndex} + 1)"></div>
                <div class="mk-info">
                    <h1 th:text="${mkDetail.nama}">Mata Kuliah</h1>
                    <p><b>Koordinator:</b> 
                        <span th:text="${koordinator?.user?.nama ?: 'Belum Ditentukan'}">
                            Belum Ditentukan
                        </span>
                    </p>
                    <p><b>NIP:</b> 
                        <span th:text="${koordinator?.user?.idUser ?: 'XXXXX'}">
                            XXXXX
                        </span>
                    </p>
                </div>
            </div>

    
            <div class="breadcrumb">
                <a th:href="@{/admin/arsip-mata-kuliah}">
                    Daftar Mata Kuliah
                </a>
                <span th:text="${mkDetail.nama}">Mata Kuliah</span>
            </div>

            <div id="list-tugas-view">
                <div class="mk-content">
                    <div class="tugas-box">
                        <h3>Tugas Mendatang</h3>
                        <div class="tugas-mendatang-list">
                            <th:block th:each="tugas : ${tugasList}">
                                <div class="tugas-mendatang-card">
                                    <div class="deadline-info">
                                        <img src="/icon/kalender.png" class="kalender-icon">
                                        <span th:text="'Deadline: ' + ${#temporals.format(tugas.deadline, 'dd/MM/yyyy')}">
                                            Deadline: DD/MM/YYYY
                                        </span>
                                    </div>
                                    <p th:text="${tugas.judulTugas}">Nama Tugas</p>
                                </div>
                            </th:block>
                            <div th:if="${tugasList.empty}" class="no-tugas">
                                <p>Tidak ada tugas mendatang.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Daftar Tugas Besar -->
                    <div class="tugas-besar-list" id="tugas-besar-list">
                        <th:block th:each="tugas : ${tugasList}">
                            <div class="tugas-besar">
                                <div class="tugas-header">
                                    <img src="/icon/blue-folder.png" class="folder-icon">
                                    <h3 th:text="${tugas.judulTugas}">Nama Tugas</h3>
                                </div>
                                <p th:text="${tugas.deskripsi}">
                                    Deskripsi tugas.
                                </p>
                                 <a th:href="@{/admin/tugas-detail(kodeMk=${mkDetail.kodeMK}, idTugas=${tugas.idTugas})}">
                                    <button class="btn-lihat">Lihat Tugas ></button>
                                </a>
                            </div>
                        </th:block>

                        <div th:if="${tugasList.empty}" class="tugas-besar">
                            <p>Belum ada Tugas Besar yang tersedia untuk mata kuliah ini.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Logout handler
        document.getElementById('logoutButton').addEventListener('click', function() {
            window.location.href = '/logout';
        });
    </script>
</body>
</html>